From 614013c864e6dbda404fd75ef8f84738fb1a1317 Mon Sep 17 00:00:00 2001
From: shapirus <me@shapirus.net>
Date: Sun, 31 Jan 2016 13:12:42 -0500
Subject: [PATCH] More logging for munin-asyncd aimed at fixing the 1h bug

Backport to stable-2.0
---
 node/_bin/munin-asyncd.in | 9 +++++++++
 1 file changed, 9 insertions(+)

diff --git a/node/_bin/munin-asyncd.in b/node/_bin/munin-asyncd.in
index 754d1a07..c4f72e6b 100755
--- a/node/_bin/munin-asyncd.in
+++ b/node/_bin/munin-asyncd.in
@@ -166,6 +166,15 @@ MAIN: while($keepgoing) {
 			$when_next = $should_be_next;
 		}
 
+		DEBUG("[$$][$process_name] $plugin: should_have_been $should_have_been (" .
+			localtime($should_have_been) .
+			"), should_be_next: $should_be_next (" .
+			localtime($should_be_next) .
+			"), when: $when (" .
+			localtime($when) .
+			"), when_next: $when_next (" .
+			localtime($when_next) . ")" );
+
 		if ($do_fork && fork()) {
 			# parent, return directly
 			next PLUGIN;
-- 
2.16.2

